---
#
# Copyright (c) 2019 Wind River Systems, Inc.
#
# SPDX-License-Identifier: Apache-2.0
#
# SUB-TASK DESCRIPTION:
#   Resize Postgres, Docker and CGCS partitions for initial
#   controller unlock.
#

- name: Resize postgres and cgcs partitions
  command: "{{ item }}"
  with_items:
    - lvextend -L20G /dev/cgts-vg/pgsql-lv
    - lvextend -L10G /dev/cgts-vg/cgcs-lv
    - lvextend -L16G /dev/cgts-vg/dockerdistribution-lv
    - drbdadm -- --assume-peer-has-space resize all
    - resize2fs /dev/drbd0
    - resize2fs /dev/drbd3
    - resize2fs /dev/drbd8
